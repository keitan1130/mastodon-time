# Mastodon タイムラインビューア - Chrome拡張機能

Mastodonサーバーのタイムラインと特定ユーザーの投稿を簡単に閲覧・検索できるChrome拡張機能です。時間範囲フィルタリング機能で効率的な投稿検索が可能です。

### 3つの検索モード
- **投稿ID検索**: 特定の投稿IDで個別の投稿を瞬時に取得
- **ユーザー検索**: 特定ユーザーの投稿を大量取得（時間フィルタ対応）
- **時間範囲検索**: 指定した時間帯のローカルタイムラインを閲覧

### 高度な機能
- **大量データ取得**: 自動ページング機能で数百〜数千件の投稿を一括取得
- **進捗表示**: 大量データ取得時のリアルタイム進捗表示
- **時間フィルタ**: 1〜24時間の柔軟な時間範囲設定
- **ローカルタイムライン**: サーバーコミュニティメンバーの投稿のみを表示
- **リモートアカウント対応**: 他のインスタンスのユーザー検索が可能
- **ワンクリックアクセス**: 投稿をクリックして元投稿を新しいタブで開く
- **ホバープレビュー**: 投稿にマウスをかざすと詳細情報を表示
- **インスタンス設定**: UI上で簡単にインスタンスを変更可能

## 使用方法

### ポップアップ版
1. **拡張機能を開く**: ブラウザの拡張機能アイコンをクリック
2. **検索モードを選択**: 上部のラジオボタンから検索方法を選択
3. **検索を実行**: 「取得」ボタンをクリック
4. **結果を確認**: 表示された投稿をクリックして詳細を確認

### Content Script版
1. **Mastodonサイトにアクセス**: 対象のMastodonサーバーのウェブサイトにアクセス
2. **UIを展開**: ホームタイムライン上部の「投稿検索」の▶ボタンをクリック
3. **検索を実行**: ポップアップ版と同じ操作でページ内で直接検索
4. **結果を確認**: ページ内に表示された投稿をクリックして新しいタブで開く

### 基本操作

### 各検索モードの詳細

#### 投稿ID検索
- **入力形式**: 19桁の投稿ID（例: `114914440521507516`）
- **用途**: 特定の投稿を直接表示

#### ユーザー検索
- **ローカルユーザー**: `@keitan` または `keitan`（@マークは省略可能）
- **リモートユーザー**: `@user@mastodon.social`（他のインスタンスのユーザー）
- **時間指定**: `2025-07-26 14`（空欄の場合は最新投稿を取得）
- **検索範囲**: 1〜24時間で設定
- **取得数**: 最大200件（時間指定時は該当するすべての投稿）

#### 時間範囲検索
- **入力形式**: `YYYY-MM-DD HH`（例: `2025-07-26 14`）
- **検索範囲**: 1〜24時間で設定
- **対象**: ローカルタイムライン（サーバー内の投稿のみ）

## インストール方法

### 方法1: Chrome Web Storeからインストール（推奨）

**最も簡単で安全な方法です。**

1. **Chrome Web Storeにアクセス**
   - [Mastodon Post Viewer - Chrome Web Store](https://chromewebstore.google.com/detail/mastodon-post-viewer/iagalmohboebmmjjpihgadbaaiffjklm?utm_source=item-share-cb)

2. **インストール**
   - 「Chromeに追加」ボタンをクリック
   - 確認ダイアログで「拡張機能を追加」をクリック

3. **インストール完了**
   - ブラウザの拡張機能バーにMastodonアイコンが表示されます
   - 自動更新が有効になります

### 方法2: 開発版を手動インストール（開発者向け）

#### ステップ1: ファイルをダウンロード

**方法A: GitHubからダウンロード**
1. [リポジトリページ](https://github.com/keitan1130/mastodon-time)にアクセス
2. 緑色の「Code」ボタンをクリック
3. 「Download ZIP」を選択してダウンロード
4. ZIPファイルを解凍

**方法B: Git使用**
```bash
git clone https://github.com/keitan1130/mastodon-time.git
```

#### ステップ2: Chrome拡張機能として登録

1. **Chromeの拡張機能ページを開く**
   - アドレスバーに `chrome://extensions/` と入力してEnter
   - または：Chrome メニュー > その他のツール > 拡張機能

2. **デベロッパーモードを有効化**
   - ページ右上の「デベロッパーモード」スイッチをONにする

3. **拡張機能を読み込む**
   - 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
   - 解凍した `mastodon-time` フォルダを選択
   - 「フォルダーの選択」をクリック

4. **インストール完了**
   - ブラウザの拡張機能バーにMastodonアイコンが表示されます

### ピン留め（推奨）
拡張機能を常に表示するには：
1. アドレスバー横のパズルピースアイコンをクリック
2. Mastodon拡張機能の横のピンアイコンをクリック

## アップデート方法

### Chrome Web Store版（推奨）
Chrome Web Store版をインストールしている場合は、自動的にアップデートされます。
手動で更新する場合は：
1. `chrome://extensions/` にアクセス
2. 「デベロッパーモード」を有効にして「更新」ボタンをクリック

### 開発版（手動インストール）

**Git使用の場合**
```bash
cd mastodon-time
git pull
```

**ZIP使用の場合**
1. 新しいZIPファイルをダウンロード
2. 古いフォルダと入れ替え

**拡張機能の更新**
1. `chrome://extensions/` にアクセス
2. 「更新」ボタンをクリック、または拡張機能の「再読み込み」ボタンをクリック

## 設定・カスタマイズ

### インスタンス設定
1. **ブラウザ拡張機能アイコンをクリック**
2. **「設定」セクションを展開**
3. **「インスタンスURL」に使用したいMastodonサーバーのURLを入力**
   - 例: `https://mastodon.social`、`https://pawoo.net`
4. **「保存」ボタンをクリック**

デフォルトは `https://mastodon.compositecomputer.club` に設定されています。

### リモートアカウント検索
他のインスタンスのユーザーを検索する場合：
- **入力形式**: `@ユーザー名@インスタンス.com`
- **例**: `@user@mastodon.social`

### 認証設定
この拡張機能は既存のブラウザセッションを使用します。使用前に対象のMastodonサーバーにログインしていることを確認してください。

## 技術仕様

- **対応サーバー**: 任意のMastodonサーバー（UI上で設定変更可能）
- **デフォルトサーバー**: mastodon.compositecomputer.club
- **リモートアカウント**: @user@instance.com 形式で他インスタンスのユーザー検索対応
- **タイムラインタイプ**: ローカルタイムライン（サーバーコミュニティの投稿のみ）
- **最大取得数**:
  - ポップアップ版：
    - ユーザー検索: 最大200件（時間指定なし）/ 無制限（時間指定あり）
    - 時間範囲検索: 約11000件（275リクエスト × 40件）
  - Content Script版：
    - ユーザー検索: 最大200件（時間指定なし）/ 無制限（時間指定あり）
    - 時間範囲検索: 約11000件（275リクエスト × 40件）
- **時間範囲**: 1〜24時間（ユーザー選択可能）
- **API**: Mastodon REST API v1
- **対応ブラウザ**: Google Chrome, Microsoft Edge, その他Chromium系ブラウザ
- **配布方法**: Chrome Web Store + GitHub（オープンソース）
- **ファイル構成**:
  - `manifest.json`: 拡張機能の設定
  - `popup.html/popup.js`: ポップアップ版のUI
  - `content.js/content.css`: Content Script版のUI
  - `background.js`: バックグラウンド処理

## トラブルシューティング

### よくある問題

**Q: 投稿が表示されない**
- A: 対象のMastodonサーバーにログインしているか確認してください

**Q: Content Script版のUIが表示されない**
- A: Mastodonのホームページにアクセスしているか確認してください。ページの再読み込みも試してください

**Q: エラーが発生する**
- A: ブラウザのデベロッパーツール（F12）でコンソールエラーを確認してください

**Q: 時間検索で結果が少ない**
- A: 指定した時間帯に投稿が少ない可能性があります。時間範囲を広げてみてください

**Q: ユーザー検索でユーザーが見つからない**
- A: ユーザー名のスペルを確認し、@マークの有無を試してください
- A: リモートユーザーの場合は `@user@instance.com` 形式で入力してください
- A: Misskeyなど非Mastodonインスタンスはサポートされていません

### サポート
問題が解決しない場合は、[GitHub Issues](https://github.com/keitan1130/mastodon-time/issues)でご報告ください。
